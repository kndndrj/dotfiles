######################
## Basic settings   ##
######################

# Prefix is Ctrl-a
set -g prefix C-a
bind-key C-a send-prefix
unbind-key C-b

set -sg escape-time 1
set -g base-index 1
setw -g pane-base-index 1

# Color support
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"

# Mouse
set -g mouse on

set -g mode-keys vi
set -g history-limit 10000

######################
## Key bindings     ##
######################

# Copy mode
bind-key Escape copy-mode
unbind-key p
bind-key p paste-buffer
bind-key -T copy-mode-vi 'v' send -X begin-selection
bind-key -T copy-mode-vi 'y' send -X copy-selection
bind-key -T copy-mode-vi 'Space' send -X halfpage-down
bind-key -T copy-mode-vi 'Bspace' send -X halfpage-up

# Pane switching with awareness of vim splits
# See: https://github.com/christoomey/vim-tmux-navigator
is_vim="ps -o state= -o comm= -t '#{pane_tty}' \
    | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?)(diff)?$'"
bind-key h if-shell "$is_vim" 'send-keys C-a h' 'select-pane -L'
bind-key j if-shell "$is_vim" 'send-keys C-a j' 'select-pane -D'
bind-key k if-shell "$is_vim" 'send-keys C-a k' 'select-pane -U'
bind-key l if-shell "$is_vim" 'send-keys C-a l' 'select-pane -R'

# Moving between windows
bind-key -r C-h select-window -t :-
bind-key -r C-l select-window -t :+

# Resize panes
bind-key -r H resize-pane -L 5
bind-key -r J resize-pane -D 5
bind-key -r K resize-pane -U 5
bind-key -r L resize-pane -R 5


######################
## Style settings   ##
######################

# Inactive window different color
set -g window-style 'bg=#22292e'
set -g window-active-style 'bg=#2f383e'

# loud or quiet?
set -g visual-activity on
set -g visual-bell on
set -g visual-silence on
setw -g monitor-activity on
set -g bell-action none

# Panes
set -g pane-border-style 'fg=default bg=default'
set -g pane-active-border-style 'fg=default bg=default'

# Statusbar
set -g status-position bottom
set -g status-justify left
set -g status-right '%d.%m #[fg=default bg=grey bold] %H:%M '
setw -g window-status-current-style 'fg=default bg=blue bold'
setw -g window-status-current-format ' #I:#W#F '
